(function(e){function t(t){for(var i,r,s=t[0],c=t[1],l=t[2],d=0,v=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&v.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(v.length)v.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},o=[];function r(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d216214":"a631c492","chunk-2d216257":"d8c9bc89","chunk-45d4c016":"a61432e9"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,i){a=n[e]=[t,i]}));t.push(a[2]=i);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=r(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(d);var a=n[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,a[1](l)}n[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app"}},[e.logueado?a("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[e.esAdministrador||e.esGerente||e.esTrabajador?[a("v-list-item",{attrs:{to:{name:"Home"}}},[a("v-list-item-action",[a("v-icon",[e._v("home")])],1),a("v-list-item-title",[e._v(" Inicio ")])],1)]:e._e(),e.esAdministrador||e.esTrabajador?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[e._v(" Gest. Incidencias ")])],1)],1),a("v-list-item",{attrs:{to:{name:"incidencia"}}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-note")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Incidencias ")])],1)],1)],1)]:e._e(),e.esAdministrador||e.esTrabajador?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[e._v(" Reincidencias ")])],1)],1),a("v-list-item",{attrs:{to:{name:"reincidencia"}}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-note-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Reincidencia ")])],1)],1)],1)]:e._e(),e.esAdministrador||e.esGerente||e.esTrabajador?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[e._v(" Reportes ")])],1)],1),a("v-list-item",{attrs:{to:{name:"reporte2"}}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-book")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Informe / Incidencias ")])],1)],1),a("v-list-item",{attrs:{to:{name:"reporteRein"}}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-book-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Informe / Reincidencias ")])],1)],1)],1)]:e._e(),e.esAdministrador||e.esGerente?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[e._v(" Estadistica ")])],1)],1),a("v-list-item",{attrs:{to:{name:"reporte"}}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-chart-bar")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Grafico / Incidencias ")])],1)],1)],1)]:e._e(),e.esAdministrador?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[e._v(" Accesos ")])],1)],1),a("v-list-item",{attrs:{to:{name:"usuario"}}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-account-multiple")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" Usuarios ")])],1)],1)],1)]:e._e()],2)],1):e._e(),a("v-app-bar",{attrs:{"clipped-left":e.$vuetify.breakpoint.lgAndUp,app:"",color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[e._v("Sistema")])],1),a("v-spacer"),e.logueado?a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.salir()}}},[a("v-icon",[e._v("logout")]),e._v("Salir ")],1):a("v-btn",{attrs:{to:{name:"login"},icon:""}},[a("v-icon",[e._v("apps")]),e._v("Login ")],1)],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-footer",{attrs:{height:"auto"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-card",{staticClass:"white--text",attrs:{flat:"",tile:"",color:"primary"}},[a("v-card-text",{staticClass:"white--text pt-0 text-md-center"},[e._v(" Sistema ©2021 ")])],1)],1)],1)],1)],1)},o=[],r={name:"App",data:function(){return{drawer:!0}},computed:{logueado:function(){return this.$store.state.usuario},esAdministrador:function(){return this.$store.state.usuario&&"administrador"==this.$store.state.usuario.rol},esGerente:function(){return this.$store.state.usuario&&"gerente"==this.$store.state.usuario.rol},esTrabajador:function(){return this.$store.state.usuario&&"trabajador"==this.$store.state.usuario.rol}},created:function(){this.$store.dispatch("autoLogin")},methods:{salir:function(){this.$store.dispatch("salir")}}},s=r,c=a("2877"),l=a("6544"),d=a.n(l),u=a("7496"),v=a("40dc"),h=a("5bc1"),m=a("8336"),f=a("b0af"),p=a("99d9"),b=a("a523"),x=a("a75b"),g=a("0e8f"),k=a("553a"),_=a("132d"),I=a("a722"),T=a("8860"),y=a("56b0"),C=a("da13"),V=a("1800"),w=a("5d23"),D=a("f774"),j=a("0789"),M=a("2fa4"),F=a("2a7f"),A=Object(c["a"])(s,n,o,!1,null,null,null),S=A.exports;d()(A,{VApp:u["a"],VAppBar:v["a"],VAppBarNavIcon:h["a"],VBtn:m["a"],VCard:f["a"],VCardText:p["b"],VContainer:b["a"],VContent:x["a"],VFlex:g["a"],VFooter:k["a"],VIcon:_["a"],VLayout:I["a"],VList:T["a"],VListGroup:y["a"],VListItem:C["a"],VListItemAction:V["a"],VListItemContent:w["a"],VListItemTitle:w["b"],VNavigationDrawer:D["a"],VSlideYTransition:j["e"],VSpacer:M["a"],VToolbarTitle:F["a"]});var P=a("8c4f"),O=a("2f62"),$=a("1232");i["a"].use(O["a"]);var R=new O["a"].Store({state:{token:null,usuario:null},mutations:{setToken:function(e,t){e.token=t},setUsuario:function(e,t){e.usuario=t}},actions:{guardarToken:function(e,t){var a=e.commit;a("setToken",t),a("setUsuario",Object($["a"])(t)),localStorage.setItem("token",t)},autoLogin:function(e){var t=e.commit,a=localStorage.getItem("token");a&&(t("setToken",a),t("setUsuario",Object($["a"])(a))),Qe.push({name:"Home"})},salir:function(e){var t=e.commit;t("setToken",null),t("setUsuario",null),localStorage.removeItem("token"),Qe.push({name:"login"})}},modules:{}}),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-m":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("div",{staticClass:"ct-chart"},[a("canvas",{attrs:{id:"myChart"}})])])],1)],1)},L=[],B=(a("d81d"),a("bc3a")),K=a.n(B),G=a("d549"),N={data:function(){return{valores:[],unidades:[],totales:[]}},methods:{listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("grafico/enviarData",a).then((function(t){e.valores=t.data,e.graficar()})).catch((function(e){console.log(e)}))},graficar:function(){var e=this;e.valores.map((function(t){e.unidades.push(t.nombreCliente),e.totales.push(t.count)}));var t=document.getElementById("myChart");new G["a"](t,{type:"bar",data:{labels:e.unidades,datasets:[{label:"Número de Atenciones",data:e.totales,backgroundColor:["rgba(93, 173, 226)"],borderColor:["rgba(27, 79, 114)"],borderWidth:2}]},options:{indexAxis:"y",scales:{y:{beginAtZero:!0}}}})}},mounted:function(){this.listar()}},U=N,H=Object(c["a"])(U,E,L,!1,null,null,null),q=H.exports;d()(H,{VContainer:b["a"],VFlex:g["a"],VLayout:I["a"]});var z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.incidencias,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Incidencias")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),i),[e._v(" Nuevo ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.responsables,label:"Responsable"},model:{value:e.responsable,callback:function(t){e.responsable=t},expression:"responsable"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.tipoIncidencia,label:"Tipo"},model:{value:e.tipo,callback:function(t){e.tipo=t},expression:"tipo"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-autocomplete",{attrs:{items:e.clientes,label:"Cliente"},model:{value:e.nombreCliente,callback:function(t){e.nombreCliente=t},expression:"nombreCliente"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.tipoPrioridad,label:"Prioridad"},model:{value:e.prioridad,callback:function(t){e.prioridad=t},expression:"prioridad"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.tipoMedioAtencion,label:"Med. Atención"},model:{value:e.medioAtencion,callback:function(t){e.medioAtencion=t},expression:"medioAtencion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.fechaInicio,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaInicio=t},"update:return-value":function(t){e.fechaInicio=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Inicio","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.fechaInicio)}}},[e._v(" OK ")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.fechaTermino,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaTermino=t},"update:return-value":function(t){e.fechaTermino=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Termino","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.fechaTermino)}}},[e._v(" OK ")])],1)],1)],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.valida,expression:"valida"}],attrs:{cols:"12",sm:"6",md:"4"}},e._l(e.validaMensaje,(function(t){return a("div",{key:t,staticClass:"red--text",domProps:{textContent:e._s(t)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.guardar}},[e._v(" Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("¿Desea eliminar esta incidencia?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Si")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.listar()}}},[e._v(" Reset ")])]},proxy:!0}])})],1)],1)},J=[],Q=(a("a434"),{data:function(){return{dialog:!1,search:"",incidencias:[],dialogDelete:!1,headers:[{text:"Codigo",value:"codigo",sortable:!1},{text:"Responsable",value:"responsable.nombre",sortable:!0},{text:"Tipo",value:"tipo",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!1},{text:"Cliente",value:"nombreCliente",sortable:!0},{text:"Prioridad",value:"prioridad",sortable:!0},{text:"Atención",value:"medioAtencion",sortable:!0},{text:"FechaIni",value:"fechaInicio",sortable:!0},{text:"FechaTer",value:"fechaTermino",sortable:!0},{text:"Editar",value:"actions",sortable:!1}],editedIndex:-1,_id:"",codigo:"",responsable:"",responsables:[],tipo:"",tipoIncidencia:["SGD","CD","MAT","SGT","ATD","OTROS"],descripcion:"",nombreCliente:"",clientes:["FM","FFB","FO","FMV","FPSI","FLCH","FE","FDCP","FCCSS","FQIQ","FCB","FCF","FCM","FIGMMG","FII","FIEE","FISI","FCA","FCC","FCE","OGAL","VRAP","SG","OGCRI","VRIP","UTYC","DGA","OGAL","OGBU","OGRRHH","DGEP","R"],prioridad:"",tipoPrioridad:["Baja","Media","Alta"],medioAtencion:"",tipoMedioAtencion:["Correo electrónico","Llamada","Remota"],fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaTermino:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1,valida:0,validaMensaje:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.listar(),this.selectResponsable()},methods:{selectResponsable:function(){var e=this,t=[],a={token:this.$store.state.token},i={headers:a};K.a.get("usuario/listar",i).then((function(a){t=a.data,t.map((function(t){"trabajador"==t.rol&&e.responsables.push({text:t.nombre,value:t._id})}))})).catch((function(e){console.log(e)}))},listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("incidencia/listar",a).then((function(t){e.incidencias=t.data})).catch((function(e){console.log(e)}))},limpiar:function(){this._id="",this.responsable="",this.tipo="",this.descripcion="",this.nombreCliente="",this.prioridad="",this.medioAtencion="",this.fechaInicio="",this.fechaTermino="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.tipo.length<1&&this.validaMensaje.push("Ingrese tipo"),this.fechaInicio.length<1&&this.validaMensaje.push("Ingrese fecha inicio"),this.fechaTermino.length<1&&this.validaMensaje.push("Ingrese fecha termino"),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};this.validar()||(this.editedIndex>-1?K.a.put("incidencia/editar",{_id:this._id,codigo:this.codigo,responsable:this.responsable,tipo:this.tipo,descripcion:this.descripcion,nombreCliente:this.nombreCliente,prioridad:this.prioridad,medioAtencion:this.medioAtencion,fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino},a).then((function(t){e.limpiar(),e.close(),e.listar()})).catch((function(e){console.log(e)})):K.a.post("incidencia/agregar",{codigo:"",responsable:this.responsable,tipo:this.tipo,descripcion:this.descripcion,nombreCliente:this.nombreCliente,prioridad:this.prioridad,medioAtencion:this.medioAtencion,fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino},a).then((function(t){e.limpiar(),e.close(),e.listar()})).catch((function(e){console.log(e)})))},editItem:function(e){this._id=e._id,this.codigo=e.codigo,this.responsable=e.responsable._id,this.tipo=e.tipo,this.descripcion=e.descripcion,this.nombreCliente=e.nombreCliente,this.prioridad=e.prioridad,this.medioAtencion=e.medioAtencion,this.fechaInicio=e.fechaInicio,this.fechaTermino=e.fechaTermino,this.dialog=!0,this.editedIndex=1},deleteItem:function(e){this.editedIndex=this.incidencias.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.incidencias.splice(this.editedIndex,1),this.closeDelete()},close:function(){this.limpiar(),this.dialog=!1},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))}}}),W=Q,Y=a("c6a6"),Z=a("62ad"),X=a("8fea"),ee=a("2e4b"),te=a("169a"),ae=a("ce7e"),ie=a("e449"),ne=a("0fd9"),oe=a("b974"),re=a("8654"),se=a("71d9"),ce=Object(c["a"])(W,z,J,!1,null,null,null),le=ce.exports;d()(ce,{VAutocomplete:Y["a"],VBtn:m["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:Z["a"],VContainer:b["a"],VDataTable:X["a"],VDatePicker:ee["a"],VDialog:te["a"],VDivider:ae["a"],VFlex:g["a"],VIcon:_["a"],VLayout:I["a"],VMenu:ie["a"],VRow:ne["a"],VSelect:oe["a"],VSpacer:M["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.reincidencias,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Reincidencias")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),i),[e._v(" Nuevo ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.incidencias,label:"Incidencia"},model:{value:e.incidencia,callback:function(t){e.incidencia=t},expression:"incidencia"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:e.descripcion,callback:function(t){e.descripcion=t},expression:"descripcion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.fechaInicio,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaInicio=t},"update:return-value":function(t){e.fechaInicio=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Inicio","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.fechaInicio)}}},[e._v(" OK ")])],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.fechaTermino,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaTermino=t},"update:return-value":function(t){e.fechaTermino=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Termino","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.fechaTermino)}}},[e._v(" OK ")])],1)],1)],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.valida,expression:"valida"}],attrs:{cols:"12",sm:"6",md:"4"}},e._l(e.validaMensaje,(function(t){return a("div",{key:t,staticClass:"red--text",domProps:{textContent:e._s(t)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.guardar}},[e._v(" Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("¿Desea eliminar esta incidencia?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Si")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.listar()}}},[e._v(" Reset ")])]},proxy:!0}])})],1)],1)},ue=[],ve={data:function(){return{dialog:!1,search:"",reincidencias:[],dialogDelete:!1,headers:[{text:"#",value:"replica",sortable:!1},{text:"Incidencia",value:"incidencia.codigo",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!1},{text:"FechaIni",value:"fechaInicio",sortable:!0},{text:"FechaTer",value:"fechaTermino",sortable:!0},{text:"Editar",value:"actions",sortable:!1}],editedIndex:-1,_id:"",replica:1,incidencia:"",incidencias:[],descripcion:"",fechaInicio:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fechaTermino:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1,valida:0,validaMensaje:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.listar(),this.selectIncidencia()},methods:{selectIncidencia:function(){var e=this,t=[],a={token:this.$store.state.token},i={headers:a};K.a.get("incidencia/listar",i).then((function(a){t=a.data,t.map((function(t){e.incidencias.push({text:t.codigo,value:t._id})}))})).catch((function(e){console.log(e)}))},listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("reincidencia/listar",a).then((function(t){e.reincidencias=t.data})).catch((function(e){console.log(e)}))},limpiar:function(){this._id="",this.incidencia="",this.descripcion="",this.fechaInicio="",this.fechaTermino="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.fechaInicio.length<1&&this.validaMensaje.push("Ingrese fecha inicio"),this.fechaTermino.length<1&&this.validaMensaje.push("Ingrese fecha termino"),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};this.validar()||(this.editedIndex>-1?K.a.put("reincidencia/editar",{_id:this._id,replica:this.replica,incidencia:this.incidencia,descripcion:this.descripcion,fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino},a).then((function(t){e.limpiar(),e.close(),e.listar()})).catch((function(e){console.log(e)})):K.a.post("reincidencia/agregar",{replica:this.replica,incidencia:this.incidencia,descripcion:this.descripcion,fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino},a).then((function(t){e.limpiar(),e.close(),e.listar()})).catch((function(e){console.log(e)})))},editItem:function(e){this._id=e._id,this.replica=e.replica,this.incidencia=e.incidencia._id,this.descripcion=e.descripcion,this.fechaInicio=e.fechaInicio,this.fechaTermino=e.fechaTermino,this.dialog=!0,this.editedIndex=1},deleteItem:function(e){this.editedIndex=this.incidencias.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.incidencias.splice(this.editedIndex,1),this.closeDelete()},close:function(){this.limpiar(),this.dialog=!1},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))}}},he=ve,me=Object(c["a"])(he,de,ue,!1,null,null,null),fe=me.exports;d()(me,{VBtn:m["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:Z["a"],VContainer:b["a"],VDataTable:X["a"],VDatePicker:ee["a"],VDialog:te["a"],VDivider:ae["a"],VFlex:g["a"],VIcon:_["a"],VLayout:I["a"],VMenu:ie["a"],VRow:ne["a"],VSelect:oe["a"],VSpacer:M["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]});var pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.usuarios,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Usuarios")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),i),[e._v(" Nuevo ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:e.nombre,callback:function(t){e.nombre=t},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Ape. Paterno"},model:{value:e.apePat,callback:function(t){e.apePat=t},expression:"apePat"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Ape. Materno"},model:{value:e.apeMat,callback:function(t){e.apeMat=t},expression:"apeMat"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"DNI"},model:{value:e.dni,callback:function(t){e.dni=t},expression:"dni"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.roles,label:"Rol"},model:{value:e.rol,callback:function(t){e.rol=t},expression:"rol"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:e.estados,label:"Estado"},model:{value:e.estado,callback:function(t){e.estado=t},expression:"estado"}})],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:e.valida,expression:"valida"}],attrs:{cols:"12",sm:"6",md:"4"}},e._l(e.validaMensaje,(function(t){return a("div",{key:t,staticClass:"red--text",domProps:{textContent:e._s(t)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.guardar}},[e._v(" Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("¿Desea eliminar esta incidencia?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Si")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.listar()}}},[e._v(" Reset ")])]},proxy:!0}])})],1)],1)},be=[],xe={data:function(){return{dialog:!1,search:"",usuarios:[],dialogDelete:!1,headers:[{text:"Rol",value:"rol",sortable:!0},{text:"Nombre",value:"nombre",sortable:!0},{text:"ApePaterno",value:"apePat",sortable:!0},{text:"ApeMaterno",value:"apeMat",sortable:!0},{text:"DNI",value:"dni",sortable:!0},{text:"Email",value:"email",sortable:!0},{text:"Estado",value:"estado",sortable:!0},{text:"Editar",value:"actions",sortable:!1}],editedIndex:-1,_id:"",nombre:"",rol:"",roles:["administrador","gerente","trabajador"],apePat:"",apeMat:"",dni:"",email:"",password:"",estado:1,estados:["Activo","Inactivo"],codigo:"",valida:0,validaMensaje:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.listar()},methods:{listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("usuario/listar",a).then((function(t){e.usuarios=t.data})).catch((function(e){console.log(e)}))},limpiar:function(){this._id="",this.rol="",this.nombre="",this.apePat="",this.apeMat="",this.apePat="",this.dni="",this.email="",this.password="",this.estado=0,this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.rol||this.validaMensaje.push("Seleccione Rol"),(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("Ingrese Nombre"),(this.apePat.length<1||this.apePat.length>50)&&this.validaMensaje.push("Ingrese Apellido Paterno"),this.dni||this.validaMensaje.push("Ingrese DNI"),(this.email.length<1||this.email.length>50)&&this.validaMensaje.push("Ingrese Email"),(this.password.length<1||this.password.length>64)&&this.validaMensaje.push("Ingrese Password"),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};this.validar()||(this.editedIndex>-1?("Activo"==this.estado?this.estado=1:this.estado=0,K.a.put("usuario/editar",{_id:this._id,nombre:this.nombre,apePat:this.apePat,apeMat:this.apeMat,rol:this.rol,dni:this.dni,email:this.email,password:this.password,estado:this.estado},a).then((function(t){e.limpiar(),e.close(),e.listar()})).catch((function(e){console.log(e)}))):K.a.post("usuario/agregar",{rol:this.rol,nombre:this.nombre,apePat:this.apePat,apeMat:this.apeMat,dni:this.dni,email:this.email,password:this.password},a).then((function(t){e.limpiar(),e.close(),e.listar()})).catch((function(e){console.log(e)})))},editItem:function(e){this._id=e._id,this.nombre=e.nombre,this.apePat=e.apePat,this.apeMat=e.apeMat,this.rol=e.rol,this.dni=e.dni,this.email=e.email,this.password=e.password,this.estado=e.estado,this.dialog=!0,this.editedIndex=1},deleteItem:function(e){this.editedIndex=this.incidencias.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.incidencias.splice(this.editedIndex,1),this.closeDelete()},close:function(){this.limpiar(),this.dialog=!1},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))}}},ge=xe,ke=Object(c["a"])(ge,pe,be,!1,null,null,null),_e=ke.exports;d()(ke,{VBtn:m["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:Z["a"],VContainer:b["a"],VDataTable:X["a"],VDialog:te["a"],VDivider:ae["a"],VFlex:g["a"],VIcon:_["a"],VLayout:I["a"],VRow:ne["a"],VSelect:oe["a"],VSpacer:M["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]});var Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Grafico")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.fechaInicio,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaInicio=t},"update:return-value":function(t){e.fechaInicio=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Inicio","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.fechaInicio)}}},[e._v(" OK ")])],1)],1),a("v-spacer"),a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.fechaTermino,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaTermino=t},"update:return-value":function(t){e.fechaTermino=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Termino","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.fechaTermino)}}},[e._v(" OK ")])],1)],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",outlined:""},on:{click:e.guardar}},[e._v("Buscar"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-magnify")])],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"error",outlined:""},on:{click:e.limpiar}},[e._v("Limpiar"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-eraser")])],1),a("v-spacer"),e._l(e.validaMensaje,(function(t){return a("div",{key:t,staticClass:"red--text",domProps:{textContent:e._s(t)}})}))],2)],1),a("v-flex",[a("v-card",[a("div",{staticClass:"ct-chart"},[a("canvas",{attrs:{id:"myChart"}})])])],1)],1)],1)},Te=[],ye={data:function(){return{fechaInicio:"",fechaTermino:"",menu:!1,modal:!1,menu2:!1,valida:0,validaMensaje:[],valores:[],myChart:null}},methods:{limpiar:function(){this.fechaInicio="",this.fechaTermino="",this.valores=[]},validar:function(){return this.valida=0,this.validaMensaje=[],this.fechaInicio.length<1&&this.validaMensaje.push("Ingrese fecha inicio"),this.fechaTermino.length<1&&this.validaMensaje.push("Ingrese fecha termino"),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};this.validar()||K.a.post("grafico/enviar",{fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino},a).then((function(t){e.valores=[],e.$nextTick((function(){e.valores=t.data,console.log(t.data),e.graficar()}))})).catch((function(e){console.log(e)}))},listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("grafico/enviarData",a).then((function(t){e.valores=t.data,e.graficar()})).catch((function(e){console.log(e)}))},graficar:function(){var e=[],t=[],a=this;a.valores.map((function(a){e.push(a.nombreCliente),t.push(a.count)}));var i=document.getElementById("myChart");a.myChart&&a.myChart.destroy(),a.myChart=new G["a"](i,{type:"bar",data:{labels:e,datasets:[{label:"Número de Atenciones",data:t,backgroundColor:["rgba(93, 173, 226)"],borderColor:["rgba(27, 79, 114)"],borderWidth:2}]},options:{indexAxis:"y",scales:{y:{beginAtZero:!0}}}})}},mounted:function(){this.listar()}},Ce=ye,Ve=Object(c["a"])(Ce,Ie,Te,!1,null,null,null),we=Ve.exports;d()(Ve,{VBtn:m["a"],VCard:f["a"],VContainer:b["a"],VDatePicker:ee["a"],VDivider:ae["a"],VFlex:g["a"],VIcon:_["a"],VLayout:I["a"],VMenu:ie["a"],VSpacer:M["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]});var De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.incidencias,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Reporte")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-select",{attrs:{items:e.responsables,label:"Responsable"},model:{value:e.responsable,callback:function(t){e.responsable=t},expression:"responsable"}}),a("v-spacer"),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.fechaInicio,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaInicio=t},"update:return-value":function(t){e.fechaInicio=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Inicio","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.fechaInicio)}}},[e._v(" OK ")])],1)],1),a("v-spacer"),a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.fechaTermino,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaTermino=t},"update:return-value":function(t){e.fechaTermino=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Termino","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.fechaTermino)}}},[e._v(" OK ")])],1)],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",outlined:""},on:{click:e.buscar}},[e._v("Buscar"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-magnify")])],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"error",outlined:""},on:{click:e.limpiar}},[e._v("Limpiar"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-eraser")])],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"success"},on:{click:e.crearPDF}},[e._v("PDF"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-file-document")])],1),a("v-spacer"),e._l(e.validaMensaje,(function(t){return a("div",{key:t,staticClass:"red--text",domProps:{textContent:e._s(t)}})}))],2)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.listar()}}},[e._v(" Reset ")])]},proxy:!0}])})],1)],1)},je=[],Me=a("8baf"),Fe=(a("0da4"),{data:function(){return{dialog:!1,search:"",incidencias:[],dialogDelete:!1,headers:[{text:"Codigo",value:"codigo",sortable:!1},{text:"Responsable",value:"responsable.nombre",sortable:!0},{text:"Tipo",value:"tipo",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!1},{text:"Cliente",value:"nombreCliente",sortable:!0},{text:"Prioridad",value:"prioridad",sortable:!0},{text:"Atención",value:"medioAtencion",sortable:!0},{text:"FechaIni",value:"fechaInicio",sortable:!0},{text:"FechaTer",value:"fechaTermino",sortable:!0}],responsable:"",responsables:[],fechaInicio:"",fechaTermino:"",menu:!1,modal:!1,menu2:!1,valida:0,validaMensaje:[]}},created:function(){this.listar(),this.selectResponsable()},methods:{crearPDF:function(){var e=[{title:"Codigo",dataKey:"codigo"},{title:"Responsable",dataKey:"responsable"},{title:"Tipo",dataKey:"tipo"},{title:"Descripcion",dataKey:"descripcion"},{title:"Cliente",dataKey:"cliente"},{title:"Prioridad",dataKey:"prioridad"},{title:"Atencion",dataKey:"atencion"},{title:"Fecha Inicio",dataKey:"fecha_inicio"},{title:"Fecha Termino",dataKey:"fecha_termino"}],t=[];this.incidencias.map((function(e){t.push({codigo:e.codigo,responsable:e.responsable.nombre,tipo:e.tipo,descripcion:e.descripcion,cliente:e.nombreCliente,prioridad:e.prioridad,atencion:e.medioAtencion,fecha_inicio:e.fechaInicio,fecha_termino:e.fechaTermino})}));var a=new Me["default"]("l","pt");a.autoTable(e,t,{margin:{top:60},addPageContent:function(e){a.text("Reporte de incidencias",40,30)}}),a.save("Incidencias.pdf")},selectResponsable:function(){var e=this,t=[],a={token:this.$store.state.token},i={headers:a};K.a.get("usuario/listar",i).then((function(a){t=a.data,t.map((function(t){"trabajador"==t.rol&&e.responsables.push({text:t.nombre,value:t._id})}))})).catch((function(e){console.log(e)}))},listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("reporte/filtrar1",a).then((function(t){e.incidencias=t.data})).catch((function(e){console.log(e)}))},limpiar:function(){this.fechaInicio="",this.fechaTermino="",this.responsable="",this.valores=[]},validar:function(){return this.valida=0,this.validaMensaje=[],this.fechaInicio.length<1&&this.validaMensaje.push("Ingrese fecha inicio"),this.fechaTermino.length<1&&this.validaMensaje.push("Ingrese fecha termino"),this.validaMensaje.length&&(this.valida=1),this.valida},buscar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};this.validar()||K.a.post("reporte/filtrar2",{fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino,responsable:this.responsable},a).then((function(t){e.incidencias=[],e.incidencias=t.data})).catch((function(e){console.log(e)}))}},mounted:function(){this.listar()}}),Ae=Fe,Se=Object(c["a"])(Ae,De,je,!1,null,null,null),Pe=Se.exports;d()(Se,{VBtn:m["a"],VDataTable:X["a"],VDatePicker:ee["a"],VDivider:ae["a"],VFlex:g["a"],VIcon:_["a"],VLayout:I["a"],VMenu:ie["a"],VSelect:oe["a"],VSpacer:M["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]});var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.reincidencias,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Reporte")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-spacer"),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.fechaInicio,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaInicio=t},"update:return-value":function(t){e.fechaInicio=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Inicio","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaInicio,callback:function(t){e.fechaInicio=t},expression:"fechaInicio"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.fechaInicio)}}},[e._v(" OK ")])],1)],1),a("v-spacer"),a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.fechaTermino,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.fechaTermino=t},"update:return-value":function(t){e.fechaTermino=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Termino","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},"v-text-field",n,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.fechaTermino,callback:function(t){e.fechaTermino=t},expression:"fechaTermino"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.fechaTermino)}}},[e._v(" OK ")])],1)],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",outlined:""},on:{click:e.buscar}},[e._v("Buscar"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-magnify")])],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"error",outlined:""},on:{click:e.limpiar}},[e._v("Limpiar"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-eraser")])],1),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"success"},on:{click:e.crearPDF}},[e._v("PDF"),a("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-file-document")])],1),a("v-spacer"),e._l(e.validaMensaje,(function(t){return a("div",{key:t,staticClass:"red--text",domProps:{textContent:e._s(t)}})}))],2)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.listar()}}},[e._v(" Reset ")])]},proxy:!0}])})],1)],1)},$e=[],Re={data:function(){return{dialog:!1,search:"",reincidencias:[],dialogDelete:!1,headers:[{text:"#",value:"replica",sortable:!1},{text:"Incidencia",value:"incidencia.codigo",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!1},{text:"FechaIni",value:"fechaInicio",sortable:!0},{text:"FechaTer",value:"fechaTermino",sortable:!0}],incidencia:"",incidencias:[],fechaInicio:"",fechaTermino:"",menu:!1,modal:!1,menu2:!1,valida:0,validaMensaje:[]}},created:function(){this.listar(),this.selectIncidencia()},methods:{crearPDF:function(){var e=[{title:"numero",dataKey:"replica"},{title:"Incidencia",dataKey:"incidencia"},{title:"Descripcion",dataKey:"descripcion"},{title:"Fecha Inicio",dataKey:"fecha_inicio"},{title:"Fecha Termino",dataKey:"fecha_termino"}],t=[];this.reincidencias.map((function(e){t.push({replica:e.replica,incidencia:e.incidencia.codigo,descripcion:e.descripcion,fecha_inicio:e.fechaInicio,fecha_termino:e.fechaTermino})}));var a=new Me["default"]("l","pt");a.autoTable(e,t,{margin:{top:60},addPageContent:function(e){a.text("Reporte de reincidencias",40,30)}}),a.save("Reincidencias.pdf")},selectIncidencia:function(){var e=this,t=[],a={token:this.$store.state.token},i={headers:a};K.a.get("incidencia/listar",i).then((function(a){t=a.data,t.map((function(t){e.incidencias.push({text:t.codigo,value:t._id})}))})).catch((function(e){console.log(e)}))},listar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};K.a.get("reporte2/filtrar3",a).then((function(t){e.reincidencias=t.data})).catch((function(e){console.log(e)}))},limpiar:function(){this.fechaInicio="",this.fechaTermino="",this.incidencia="",this.valores=[]},validar:function(){return this.valida=0,this.validaMensaje=[],this.fechaInicio.length<1&&this.validaMensaje.push("Ingrese fecha inicio"),this.fechaTermino.length<1&&this.validaMensaje.push("Ingrese fecha termino"),this.validaMensaje.length&&(this.valida=1),this.valida},buscar:function(){var e=this,t={token:this.$store.state.token},a={headers:t};this.validar()||K.a.post("reporte2/filtrar4",{fechaInicio:this.fechaInicio,fechaTermino:this.fechaTermino},a).then((function(t){e.reincidencias=[],e.reincidencias=t.data})).catch((function(e){console.log(e)}))}},mounted:function(){this.listar()}},Ee=Re,Le=Object(c["a"])(Ee,Oe,$e,!1,null,null,null),Be=Le.exports;d()(Le,{VBtn:m["a"],VDataTable:X["a"],VDatePicker:ee["a"],VDivider:ae["a"],VFlex:g["a"],VIcon:_["a"],VLayout:I["a"],VMenu:ie["a"],VSpacer:M["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]});var Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg5:"",xl4:""}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue darken-3"}},[a("v-toolbar-title",[e._v("Acceso al Sistema")])],1),a("v-card-text",[a("v-text-field",{attrs:{autofocus:"",color:"accent",label:"Email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{type:"password",color:"accent",label:"Password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.errorM?a("v-flex",{staticClass:"red--text"},[e._v(" "+e._s(e.errorM)+" ")]):e._e()],1),a("v-card-actions",{staticClass:"px-3 pb-3"},[a("v-flex",{attrs:{"text-xs-right":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.ingresar()}}},[e._v("Ingresar")])],1)],1)],1)],1)],1)},Ge=[],Ne={data:function(){return{email:"",password:"",errorM:null}},methods:{ingresar:function(){var e=this;K.a.post("usuario/login",{email:this.email,password:this.password}).then((function(e){return e.data})).then((function(t){e.$store.dispatch("guardarToken",t.tokenReturn),e.$router.push({name:"Home"})})).catch((function(t){e.errorM=null,404==t.response.status?e.errorM="No existe el usuario o las credenciales son incorrectas":e.errorM="Ocurrió un error en el servidor"}))}}},Ue=Ne,He=Object(c["a"])(Ue,Ke,Ge,!1,null,null,null),qe=He.exports;d()(He,{VBtn:m["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VFlex:g["a"],VLayout:I["a"],VTextField:re["a"],VToolbar:se["a"],VToolbarTitle:F["a"]}),i["a"].use(P["a"]);var ze=[{path:"/",name:"Home",component:q,meta:{administrador:!0,gerente:!0,trabajador:!0}},{path:"/login",name:"login",component:qe,meta:{libre:!0}},{path:"/incidencia",name:"incidencia",component:le,meta:{administrador:!0,trabajador:!0}},{path:"/reincidencia",name:"reincidencia",component:fe,meta:{administrador:!0,trabajador:!0}},{path:"/usuario",name:"usuario",component:_e,meta:{administrador:!0}},{path:"/reporte",name:"reporte",component:we,meta:{administrador:!0,gerente:!0}},{path:"/reporte2",name:"reporte2",component:Pe,meta:{administrador:!0,gerente:!0,trabajador:!0}},{path:"/reporte3",name:"reporteRein",component:Be,meta:{administrador:!0,gerente:!0,trabajador:!0}}],Je=new P["a"]({mode:"history",base:"/",routes:ze});Je.beforeEach((function(e,t,a){e.matched.some((function(e){return e.meta.libre}))?a():R.state.usuario&&"administrador"==R.state.usuario.rol?e.matched.some((function(e){return e.meta.administrador}))&&a():R.state.usuario&&"gerente"==R.state.usuario.rol?e.matched.some((function(e){return e.meta.gerente}))&&a():R.state.usuario&&"trabajador"==R.state.usuario.rol?e.matched.some((function(e){return e.meta.trabajador}))&&a():a({name:"login"})}));var Qe=Je,We=a("f309"),Ye=a("5e4e");a("5363");i["a"].use(We["a"]);var Ze=new We["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#007BFF",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},lang:{locales:{es:Ye["a"]},current:"es"},icons:{iconfont:"mdi"}});i["a"].config.productionTip=!1,K.a.defaults.baseURL="https://sri-sgdfd-back.herokuapp.com/",new i["a"]({router:Qe,store:R,vuetify:Ze,render:function(e){return e(S)}}).$mount("#app")}});
//# sourceMappingURL=app.d5429312.js.map